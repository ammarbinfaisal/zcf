# ZCF CMS (Payload)

Minimal Payload CMS for:
- Pages: editable rich text + optional hero media
- Posts (blogs/news): editable rich text + featured image
- Media library (uploads)

## Run

```bash
cd cms
bun install
cp .env.example .env
bun run dev
```

## One-time import from `raw/`

Prereqs:
- `raw/scrapy/pages.jsonl` exists (generated by `tools/zcfindia_crawl`)
- Database configured (see `.env.example` for `DATABASE_URL` / optional `DATABASE_AUTH_TOKEN`)
- (Recommended) download media into `raw/assets/live/**` so hero/gallery images can be imported

Optional (for best rich text structure):
- Generate Claude-cleaned Markdown first (requires `claude` CLI authentication/quota):

```bash
cd cms
bun run claude:markdown
```

This writes `raw/claude/markdown.jsonl`. If present, `import:raw` prefers it for rich text.

```bash
cd cms
cp .env.example .env
bun run import:raw
```

Notes:
- Media import only uploads assets that exist locally in `raw/har_bodies/**` or `raw/assets/live/**`.
- If some hero/header images 404 on the live site, they won't be downloadable; the importer will skip them.
- If a scraped page ends up with 1-word-per-line text, the importer collapses it into normal paragraphs, but re-scraping with the updated spider is best.

Then open:
- Admin: `http://localhost:3001/admin`
- API: `http://localhost:3001/api`

Notes:
- This setup stores uploads under `cms/media/`.
